!!!
%html
  %head
    = include_gon(:init => true)
    %script{:src=>"http://js.pusher.com/2.1/pusher.min.js"}
    %meta{:name => "viewport", :content => "width=device-width, initial-scale=1.0"}
    %title= content_for?(:title) ? yield(:title) : 'Chat'
    %meta{:name => "description", :content => "#{content_for?(:description) ? yield(:description) : 'Chat'}"}
    %script{:src=>"http://js.pusher.com/2.1/pusher.min.js"}
    = stylesheet_link_tag "application", media: "all", "data-turbolinks-track" => true
    = javascript_include_tag "application", "data-turbolinks-track" => true
    = csrf_meta_tags
  %body{:style=>("background-image:url('../background/#{background_image()}');" unless user_signed_in?)}
    .container-fluid.navbar-fixed-top
      %header
        = render 'layouts/navigation'
      .row-fluid
        - flash.each do |name, msg|
          - if msg.is_a?(String)
            %div{:class => "alert alert-#{name.to_s == 'notice' ? 'success' : 'danger'}"}
              %button.close{"aria-hidden" => "true", "data-dismiss" => "alert", :type => "button"} &times;
              = content_tag :div, msg, :id => "flash_#{name}"
        = yield